#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running CI checks before push..."
echo ""

# Run type-check
echo "ğŸ“ Type checking..."
pnpm type-check
if [ $? -ne 0 ]; then
  echo "âŒ Type check failed. Please fix the errors before pushing."
  exit 1
fi

# Run lint on mobile (the one that runs in CI)
echo ""
echo "ğŸ” Linting mobile app..."
pnpm lint --filter mobile
if [ $? -ne 0 ]; then
  echo "âŒ Lint check failed. Please fix the errors before pushing."
  exit 1
fi

# Run format check
echo ""
echo "âœ¨ Checking code formatting..."
pnpm format:check
if [ $? -ne 0 ]; then
  echo "âŒ Format check failed. Run 'pnpm format' to fix formatting."
  exit 1
fi

echo ""
echo "âœ… All CI checks passed! Pushing..."
