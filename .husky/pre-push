#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🔍 Running CI checks before push..."
echo ""

# Run type-check
echo "📝 Type checking..."
pnpm type-check
if [ $? -ne 0 ]; then
  echo "❌ Type check failed. Please fix the errors before pushing."
  exit 1
fi

# Run lint on mobile (the one that runs in CI)
echo ""
echo "🔎 Linting mobile app..."
pnpm lint --filter mobile
if [ $? -ne 0 ]; then
  echo "❌ Lint check failed. Please fix the errors before pushing."
  exit 1
fi

# Run format check
echo ""
echo "✨ Checking code formatting..."
pnpm format:check
if [ $? -ne 0 ]; then
  echo "❌ Format check failed. Run 'pnpm format' to fix formatting."
  exit 1
fi

echo ""
echo "✅ All CI checks passed! Pushing..."
